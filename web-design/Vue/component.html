<!DOCTYPE html>
<html lang="Zh-cn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组件 | 谔定浣的熊</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.bd98b8b6.css" as="style"><link rel="preload" href="/assets/js/app.f3f55258.js" as="script"><link rel="preload" href="/assets/js/2.37bd35fd.js" as="script"><link rel="preload" href="/assets/js/50.bb717a59.js" as="script"><link rel="prefetch" href="/assets/js/10.37f13515.js"><link rel="prefetch" href="/assets/js/11.465313c6.js"><link rel="prefetch" href="/assets/js/12.cf877ef4.js"><link rel="prefetch" href="/assets/js/13.94b5c286.js"><link rel="prefetch" href="/assets/js/14.8ccf3371.js"><link rel="prefetch" href="/assets/js/15.acc73f4d.js"><link rel="prefetch" href="/assets/js/16.62688db5.js"><link rel="prefetch" href="/assets/js/17.53aefb07.js"><link rel="prefetch" href="/assets/js/18.f440efb7.js"><link rel="prefetch" href="/assets/js/19.d770aa33.js"><link rel="prefetch" href="/assets/js/20.8421349d.js"><link rel="prefetch" href="/assets/js/21.1f690841.js"><link rel="prefetch" href="/assets/js/22.e5e93178.js"><link rel="prefetch" href="/assets/js/23.248c4131.js"><link rel="prefetch" href="/assets/js/24.8c43ff04.js"><link rel="prefetch" href="/assets/js/25.d3c5bc8e.js"><link rel="prefetch" href="/assets/js/26.54f1fb93.js"><link rel="prefetch" href="/assets/js/27.befa1ff5.js"><link rel="prefetch" href="/assets/js/28.fcce1c88.js"><link rel="prefetch" href="/assets/js/29.3016ddd4.js"><link rel="prefetch" href="/assets/js/3.a4c9e7fb.js"><link rel="prefetch" href="/assets/js/30.e92bb65d.js"><link rel="prefetch" href="/assets/js/31.74a34bd9.js"><link rel="prefetch" href="/assets/js/32.6caa0ec1.js"><link rel="prefetch" href="/assets/js/33.5653b692.js"><link rel="prefetch" href="/assets/js/34.0801d579.js"><link rel="prefetch" href="/assets/js/35.24c47487.js"><link rel="prefetch" href="/assets/js/36.654f2eab.js"><link rel="prefetch" href="/assets/js/37.851b8ab7.js"><link rel="prefetch" href="/assets/js/38.e4bef3df.js"><link rel="prefetch" href="/assets/js/39.593d37fd.js"><link rel="prefetch" href="/assets/js/4.4deef9ed.js"><link rel="prefetch" href="/assets/js/40.15675e92.js"><link rel="prefetch" href="/assets/js/41.fd599228.js"><link rel="prefetch" href="/assets/js/42.b24f1c19.js"><link rel="prefetch" href="/assets/js/43.2eb246c0.js"><link rel="prefetch" href="/assets/js/44.2cfa054e.js"><link rel="prefetch" href="/assets/js/45.822978f3.js"><link rel="prefetch" href="/assets/js/46.1d3e5256.js"><link rel="prefetch" href="/assets/js/47.18d6e8ee.js"><link rel="prefetch" href="/assets/js/48.94462d6b.js"><link rel="prefetch" href="/assets/js/49.58b919a8.js"><link rel="prefetch" href="/assets/js/5.28ad6baf.js"><link rel="prefetch" href="/assets/js/51.3fd01903.js"><link rel="prefetch" href="/assets/js/6.e416f727.js"><link rel="prefetch" href="/assets/js/7.62ba56a4.js"><link rel="prefetch" href="/assets/js/8.38e3313d.js"><link rel="prefetch" href="/assets/js/9.95f36535.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bd98b8b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/hero.png" alt="谔定浣的熊" class="logo"> <span class="site-name can-hide">谔定浣的熊</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/web-design/" class="nav-link router-link-active">
  高级前端养成攻略
</a></div><div class="nav-item"><a href="/CG/" class="nav-link">
  算法（todo）
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于我" class="dropdown-title"><span class="title">关于我</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于我" class="mobile-dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  没想好放什么
</a></li><li class="dropdown-item"><!----> <a href="/web-design/" class="nav-link router-link-active">
  先占个位以免忘记
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/web-design/" class="nav-link router-link-active">
  高级前端养成攻略
</a></div><div class="nav-item"><a href="/CG/" class="nav-link">
  算法（todo）
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于我" class="dropdown-title"><span class="title">关于我</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于我" class="mobile-dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  没想好放什么
</a></li><li class="dropdown-item"><!----> <a href="/web-design/" class="nav-link router-link-active">
  先占个位以免忘记
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/web-design/" aria-current="page" class="sidebar-link">简介</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Html5</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Jquery</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Browser</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Es6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Angularjs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web-design/Vue/basis.html" class="sidebar-link">基础</a></li><li><a href="/web-design/Vue/component.html" aria-current="page" class="active sidebar-link">组件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/web-design/Vue/directive.html" class="sidebar-link">指令</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Less/Stylus</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他问题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#组件注册">组件注册</a></li><li><a href="#组件选项">组件选项</a></li><li><a href="#使用props传递数据">使用props传递数据</a></li><li><a href="#组件通信">组件通信</a></li><li><a href="#slot分发内容">slot分发内容</a></li><li><a href="#高级用法">高级用法</a></li></ul></div><p></p> <h3 id="组件注册"><a href="#组件注册" class="header-anchor">#</a> 组件注册</h3> <ul><li>全局注册 <code>Vue.component(&quot;my-componnet&quot;, {//选项})</code>要在父实例中使用这个组件,必须在实例创建前注册。</li> <li>局部注册 在Vue实例中使用components选项可以局部注册，注册后的组件只有在该实例作用域下有效。组件中也可以使用components选项来注册组件，使组件可以嵌套。
注意Vue组件的模板在某些情况下会收到HTML的限制，比如table内只允许是tr,td,th等表格元素，在table内直接使用组件是无效的。这种情况下可以使用特殊的is属性来挂载组件。示例：</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-component<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>tbody在渲染时会被替换为组件的内容。常见的限制元素还有ul,ol,select。如果使用的是字符串模板则不受限制，比如在.vue单文件中时。</p> <h3 id="组件选项"><a href="#组件选项" class="header-anchor">#</a> 组件选项</h3> <p>组件可以像Vue实例那样使用其他选项。只是使用data时必须为函数，然后将数据return.注意如果return的对象引用的是外部对象，这个外部对象就是共享的，任何使用到这个组件的地方做了修改，修改就会同步。</p> <h3 id="使用props传递数据"><a href="#使用props传递数据" class="header-anchor">#</a> 使用props传递数据</h3> <p>props的值有两种。</p> <ul><li>字符串数组</li> <li>对象 需要进行验证时使用。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>props<span class="token operator">:</span><span class="token punctuation">{</span>
    propA <span class="token operator">:</span> Number<span class="token punctuation">,</span>
    propB <span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> Number<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//字符串或者数字</span>
    propC <span class="token operator">:</span> <span class="token punctuation">{</span>
        type <span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
        <span class="token keyword">default</span> <span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    propD <span class="token operator">:</span> <span class="token punctuation">{</span>
        type <span class="token operator">:</span> Number<span class="token punctuation">,</span>
        required <span class="token operator">:</span> <span class="token boolean">true</span><span class="token comment">//必传</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    propE <span class="token operator">:</span> <span class="token punctuation">{</span>
        type <span class="token operator">:</span> Array<span class="token punctuation">,</span>
        <span class="token function-variable function">default</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//如果是数组或对象，默认值必须用一个函数返回</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    propF <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">validator</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> value <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token comment">//自定义验证函数</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Vue2.x通过props传递的数据是单项数据流。</p> <h3 id="组件通信"><a href="#组件通信" class="header-anchor">#</a> 组件通信</h3> <h4 id="父子组件通信"><a href="#父子组件通信" class="header-anchor">#</a> 父子组件通信</h4> <p>子组件用$emit()触发事件,父组件用$on监听子组件的事件。父组件也可以直接在子组件的自定义标签上使用v-on监听子组件触发的自定义事件。</p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>v-on在组件上监听自定义事件外，也可以监听DOM事件，这时可以用.native修饰符表示监听的是一个原生事件。监听的是该组件的根元素。
使用v-model，组件上使用v-model指令，类似@input，子组件通过触发this.$emit(&quot;input&quot;, ..)即将传出的参数值绑定到v-model绑定的变量上。实现一个具有双向绑定的v-moel组件需要满足
1.接收一个value属性
2.在有新的value时触发input事件</p></div> <h4 id="非父子组件通信"><a href="#非父子组件通信" class="header-anchor">#</a> 非父子组件通信</h4> <p>在Vue2.x中，推荐使用一个空的Vue实例作为中央事件总线(bus)，也就是一个中介。<br>
就是通过在组件中用一个空的Vue实例触发事件$emit，在Vue实例app挂载时(mouted)监听此事件$on,然后完成业务逻辑。深入使用时还可以在bus这个实例中添加data,computed,methods等选项，如果项目较大可以用vuex更好。<br> <b>其他实现组件通信方式</b><br></p> <ol><li>父链
在子组件中，使用this.$parent可以直接访问该组件的父实例或组件，父组件也可以通过this.$children访问它的所有子组件。而且可以递归的向上或向下无线访问，直到根实例或最内层组件。访问到父链后可以直接修改数据，不过应尽量避免如此使用，父子组件不应紧耦合。</li> <li>子组件索引
子组件较多时，通过this.$children一一遍历需要的组件实例比较困难，尤其组件动态渲染，序列也是不定的。子组件索引使用特殊属性ref来为子组件指定一个索引名称。
在父组件的模板中，子组件标签上使用ref指定一个名称，并在父组件内通过this.$refs来访问指定名称的子组件。并且不仅可以在组件中使用，还可以在元素标签上使用。</li> <li>依赖注入 provide 选项允许我们指定我们想要提供给后代组件的数据/方法,然后在任何后代组件里，我们都可以使用 inject 选项来接收指定的我们想要添加在这个实例上的 property.
<code>&lt;componnet-a ref=&quot;comA&quot;&gt;&lt;/componnet-a&gt;</code>  ,<code>this.$refs.comA</code>
注意:$refs只在组件渲染完成后才填充，并且是非响应式的，仅仅是访问组件的应急方案，应避免在模板和计算属性中使用。</li></ol> <h3 id="slot分发内容"><a href="#slot分发内容" class="header-anchor">#</a> slot分发内容</h3> <h4 id="单个slot"><a href="#单个slot" class="header-anchor">#</a> 单个slot</h4> <p>在父组件模板里，插入在子组件标签内的所有内容都将替代子组件的&lt;slot&gt;标签及它的内容。如果父组件模板的子组件没有插入内容，则使用子组件slot中的默认内容。</p> <h4 id="具名slot"><a href="#具名slot" class="header-anchor">#</a> 具名slot</h4> <p>给&lt;slot&gt;元素指定一个name后可以分发多个内容，具名slot可以与单个slot共存。父组件中没有使用slot特性将作为默认slot出现。但如果没有指定匿名slot，父组件内多余内容片段都会被抛弃。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>child<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h2 slot<span class="token operator">=</span><span class="token string">&quot;header&quot;</span><span class="token operator">&gt;</span>标题<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>正文<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">&quot;footer&quot;</span><span class="token operator">&gt;</span>底部信息<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">&gt;</span>
<span class="token operator">...</span>
template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;div&gt;
        &lt;div class=&quot;header&quot;&gt;
            &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;
        &lt;/div&gt;
        &lt;div class=&quot;main&quot;&gt;
            &lt;slot&gt;&lt;/slot&gt;
        &lt;/div&gt;
        &lt;div class=&quot;footer&quot;&gt;
            &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;
        &lt;/div&gt;
    &lt;/div&gt;
</span><span class="token template-punctuation string">`</span></span>
</code></pre></div><h4 id="作用域插槽"><a href="#作用域插槽" class="header-anchor">#</a> 作用域插槽</h4> <p>一种特殊的slot，使用一个可以复用的模板替换已渲染元素.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>child<span class="token operator">-</span>component<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>template scope<span class="token operator">=</span><span class="token string">&quot;props&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>来自父组件的内容<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> props<span class="token punctuation">.</span>msg <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">-</span>component<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;child-compoennt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        template <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div class=&quot;container&quot;&gt;
                &lt;slot msg=&quot;来自子组件的内容&quot;&gt;&lt;/slot&gt;
            &lt;/div&gt;    
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>el <span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>父组件使用template元素，有一个scope=&quot;props属性。props是一个临时变量，可以在父模板中通过临时变量访问来自子组件中的数据。
这种方式子组件的可用度更广泛，由使用这掌握渲染权，通过在父模板中定义最后放进slot中。另外这个slot可以是具名也可以是匿名。</p> <h4 id="访问slot"><a href="#访问slot" class="header-anchor">#</a> 访问slot</h4> <p>组件中通过$slots可以访问某个具名slot，this.$slots.default包括所有没有被包含在具名slot中的节点。$slots业务中很少使用，render函数中有时有用。
访问的是Vnode
<img src="en-resource://database/584:1" alt="7ebd2dee1d54a4504206fe3b85c55db1.png">
通过<code>footer[0].elm.innerHTML</code></p> <h3 id="高级用法"><a href="#高级用法" class="header-anchor">#</a> 高级用法</h3> <h4 id="递归组件"><a href="#递归组件" class="header-anchor">#</a> 递归组件</h4> <p>组件在它的模板内可以递归的调用自己，只要给组件设置name的选项就可以。之后即可在template中使用name中的值递归使用。注意需要设置条件限制递归数量。组件递归使用可以用来开发具有未知层级关系的独立组件，例如级联选择器和树形控件。</p> <h4 id="内联模板"><a href="#内联模板" class="header-anchor">#</a> 内联模板</h4> <p>组件标签使用inline-template特性，组件就会把它的内容当做模板而不是内容分发。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>child<span class="token operator">-</span>component inline<span class="token operator">-</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>父组件中定义子组件模板<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> message <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> msg <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>child<span class="token operator">-</span>component<span class="token operator">&gt;</span>
</code></pre></div><p>父组件和子组件声明的数据都可以渲染，但如果同名，优先使用子组件的数据。</p> <h4 id="动态组件"><a href="#动态组件" class="header-anchor">#</a> 动态组件</h4> <p>Vue提供了一个特殊元素<code>&lt;component&gt;</code>来动态地挂载不同组件，使用is特性来选择要挂载的组件。</p> <h4 id="异步组件"><a href="#异步组件" class="header-anchor">#</a> 异步组件</h4> <p>Vue允许将组件定义为一个工厂函数，动态地解析组件。Vue.js只在组件需要渲染时触发工厂函数，并把结果缓存用于后面再次渲染。
Vue.component(&quot;component&quot;, function(resolve, reject){
通过ajax请求，然后调用resolve传入配置选项。
})</p> <h4 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h4> <h5 id="异步更新队列"><a href="#异步更新队列" class="header-anchor">#</a> 异步更新队列</h5> <p>Vue在观察到数据变化时并不是直接更新DOM，而是开启一个队列并缓冲在同一事件循环中发生的所有数据改变。在缓冲时会去除重复数据，避免不必要的计算和DOM操作。然后在下一个事件循环tick中,Vue刷新队列并执行实际工作。因此如果使用一个for循环动态改变数据100次，其实只会应用最后一次改变。Vue会根据当前浏览器环境有限使用原生的Promise.then和MutationObserver，如果都不支持会采用<code>setTimeout</code></p> <p><code>$nextTick</code>用来知道什么时候DOM更新完成。使用时<code>this.$nextTick(function(){//执行DOM完成后所做操作})</code>;</p> <h5 id="x-templates"><a href="#x-templates" class="header-anchor">#</a> X-Templates</h5> <p>在script标签里使用text/x-template类型并指定一个id，将这个id赋给template</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/x-template<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-com'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    template <span class="token operator">:</span> <span class="token string">&quot;#my-com&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="手动挂载实例"><a href="#手动挂载实例" class="header-anchor">#</a> 手动挂载实例</h5> <p>动态创建Vue实例，Vue.extend是基础Vue构造器,创建一个&quot;子类&quot;，参数是一个包含组件选项的对象。
如果Vue实例在实例化时没有收到el选项，它就处于未挂载状态，没有关联的DOM元素。可以使用$mount()手动挂载一个未挂载的实例。此方法返回实例自身，因此可链式调用。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">var</span> myComponent <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token comment">//组件选项})</span>
<span class="token keyword">new</span> <span class="token class-name">myComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//new myComponent({</span>
    el <span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="render函数"><a href="#render函数" class="header-anchor">#</a> Render函数</h4> <p>组件模板尽管写在template选项里，但在Vue.js编译时都会解析为Virtual Dom。每个Dom元素或组件都对应一个VNode对象。
注意：slots在其中使用。当createElement的第一个参数是组件选项，有render函数如何渲染。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web-design/Vue/basis.html" class="prev">
        基础
      </a></span> <span class="next"><a href="/web-design/Vue/directive.html">
        指令
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f3f55258.js" defer></script><script src="/assets/js/2.37bd35fd.js" defer></script><script src="/assets/js/50.bb717a59.js" defer></script>
  </body>
</html>
